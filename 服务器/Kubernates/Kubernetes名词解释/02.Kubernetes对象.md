# Kubernetes对象

* Kubernetes对象是Kubernetes系统中的持久实体。Kubernetes使用这些实体来表示集群的状态。
  * **容器化应用正在运行(以及在哪些节点上)**
  * **这些应用可用的资源**
  * **关于这些应用如何运行的策略，如重新策略，升级和容错**
* 必填字段
  * **apiVersion - 创建对象的Kubernetes API 版本**
  * **kind - 要创建什么样的对象？**
  * **metadata- 具有唯一标示对象的数据，包括 name（字符串）、UID和Namespace（可选项）**

## 一、Names

* Kubernetes REST API中的所有对象都用Name和UID来明确地标识。

## 二、Namespaces

* Namespace为名称提供了一个范围。资源的Names在Namespace中具有唯一性。
* Namespace是一种将集群资源划分为多个用途的方法。

Namespaces管理：

```sh
#### 创建Namespaces
#(1) 命令行直接创建
$ kubectl create namespace new-namespace

#(2) 通过文件创建
$ cat my-namespace.yaml
apiVersion: v1
kind: Namespace
metadata:
  name: new-namespace
# 创建
$ kubectl create -f ./my-namespace.yaml

### 删除Namespaces
$ kubectl delete namespaces new-namespace

### 查看namespaces
$ kubectl get namespaces
NAME          STATUS    AGE
default       Active    1d
kube-system   Active    1d

### 根据Namespaces进行查询

$ kubectl get pods --namespaces=kube-system
```

* 都在某些Namespace中。
  * 大多数Kubernetes资源（例如pod、services、replication controllers或其他）
* 不在Namespace中。
  * 但Namespace资源本身并
  * 低级别资源（如Node不在任何Namespace中。
* Events是一个例外：它们可能有也可能没有Namespace，具体取决于Events的对象。

### 2.1 配置Pod配额

**创建命名空间**

```sh
kubectl create namespace quota-pod-example
```

**创建ResourceQuota对象**

```sh
# quota-pod.yaml
# kubectl create -f quota-pod.yaml --namespace=quota-pod-example
apiVersion: v1
kind: ResourceQuota
metadata:
  name: pod-demo
spec:
  hard:
    pods: "2"
```

**查看**

```sh
kubectl get resourcequota pod-demo --namespace=quota-pod-example --output=yaml
# 输出
spec:
  hard:
    pods: "2"
status:
  hard:
    pods: "2"
  used:
    pods: "0"
```

```
spec:
  hard:
    pods: "2"
status:
  hard:
    pods: "2"
  used:
    pods: "0"
```

这个时候，如果创建以的Deployment，需要3个replicas，这个时间由于Pod的配额限制，只能创建两个Pod了。

